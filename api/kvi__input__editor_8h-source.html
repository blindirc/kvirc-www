<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>KVIrc: /home/hellvis69/Progetti/KVIrc/svn/trunk/kvirc/src/kvirc/ui/kvi_input_editor.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/home/hellvis69/Progetti/KVIrc/svn/trunk/kvirc/src/kvirc/ui/kvi_input_editor.h</h1><a href="kvi__input__editor_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _KVI_INPUT_EDITOR_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _KVI_INPUT_EDITOR_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="comment">//============================================================================</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">//   File : kvi_input_editor.h</span>
<a name="l00006"></a>00006 <span class="comment">//   Creation date : Fri Sep 5 2008 17:26:34 by Elvio Basello</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">//   This file is part of the KVirc irc client distribution</span>
<a name="l00009"></a>00009 <span class="comment">//   Copyright (C) 2008 Elvio Basello (hellvis69 at netsons dot org)</span>
<a name="l00010"></a>00010 <span class="comment">//</span>
<a name="l00011"></a>00011 <span class="comment">//   This program is FREE software. You can redistribute it and/or</span>
<a name="l00012"></a>00012 <span class="comment">//   modify it under the terms of the GNU General Public License</span>
<a name="l00013"></a>00013 <span class="comment">//   as published by the Free Software Foundation; either version 2</span>
<a name="l00014"></a>00014 <span class="comment">//   of the License, or (at your opinion) any later version.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">//   This program is distributed in the HOPE that it will be USEFUL,</span>
<a name="l00017"></a>00017 <span class="comment">//   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00018"></a>00018 <span class="comment">//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
<a name="l00019"></a>00019 <span class="comment">//   See the GNU General Public License for more details.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">//   You should have received a copy of the GNU General Public License</span>
<a name="l00022"></a>00022 <span class="comment">//   along with this program. If not, write to the Free Software Foundation,</span>
<a name="l00023"></a>00023 <span class="comment">//   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00024"></a>00024 <span class="comment">//</span>
<a name="l00025"></a>00025 <span class="comment">//============================================================================</span>
<a name="l00026"></a>00026 <span class="comment">//   This file was originally part of kvi_input.h</span>
<a name="l00027"></a>00027 <span class="comment">//============================================================================</span>
<a name="l00028"></a>00028 
<a name="l00044"></a>00044 <span class="preprocessor">#include "<a class="code" href="kvi__settings_8h.html" title="This file contains compile time settings.">kvi_settings.h</a>"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include "<a class="code" href="kvi__pointerlist_8h.html" title="C++ Template based double linked pointer list class.">kvi_pointerlist.h</a>"</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include "<a class="code" href="kvi__string_8h.html">kvi_string.h</a>"</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include "<a class="code" href="kvi__window_8h.html" title="Contains the KviWindow class.">kvi_window.h</a>"</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;QString&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;QWidget&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">class </span>QKeyEvent;
<a name="l00053"></a>00053 <span class="keyword">class </span>QDragEnterEvent;
<a name="l00054"></a>00054 <span class="keyword">class </span><a class="code" href="classKviUserListView.html" title="User list view management class.">KviUserListView</a>;
<a name="l00055"></a>00055 <span class="keyword">class </span><a class="code" href="classKviTalPopupMenu.html">KviTalPopupMenu</a>;
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="kvi__input__editor_8h.html#240066866419544310ddeb7d57cc9fca">00057</a> <span class="preprocessor">#define KVI_INPUT_MAX_BUFFER_SIZE 400</span>
<a name="l00058"></a><a class="code" href="kvi__input__editor_8h.html#1aa55591d886d2f3cd499db5fb9c4fe0">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_XTRAPADDING 1</span>
<a name="l00059"></a><a class="code" href="kvi__input__editor_8h.html#34ae14b2c46c85c5efa6c9b621beec14">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_PADDING 2</span>
<a name="l00060"></a><a class="code" href="kvi__input__editor_8h.html#434ba2a025840ae364f934c82bc95db4">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_MARGIN 2</span>
<a name="l00061"></a><a class="code" href="kvi__input__editor_8h.html#64e7b354a8bfed7d34123c3c370c5440">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_BLINK_TIME 800</span>
<a name="l00062"></a><a class="code" href="kvi__input__editor_8h.html#b6c47250536055517549e6bfd2af0c20">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_DRAG_TIMEOUT 80</span>
<a name="l00063"></a><a class="code" href="kvi__input__editor_8h.html#54a2b84c7e8e27701b559f820fe429f3">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_DEF_BACK 100</span>
<a name="l00064"></a><a class="code" href="kvi__input__editor_8h.html#c95a785c1aa364e44514648bbf00a2a4">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define KVI_INPUT_DEF_FORE 101</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="preprocessor">#ifndef ACCEL_KEY</span>
<a name="l00067"></a><a class="code" href="kvi__input__editor_8h.html#de216179489ab8c096f4f39da0bfc80f">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define ACCEL_KEY(k) "\t" + QString(QKeySequence( Qt::CTRL | Qt::Key_ ## k ))</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="classKviInputEditor.html">00074</a> <span class="keyword">class </span><a class="code" href="kvi__settings_8h.html#2b6e93c2a661b8c9970bddbac4e7bd2c">KVIRC_API</a> <a class="code" href="classKviInputEditor.html" title="Input editor class.">KviInputEditor</a> : <span class="keyword">public</span> QWidget
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076         <span class="comment">//Q_PROPERTY( int KviProperty_FocusOwner READ heightHint )</span>
<a name="l00077"></a><a class="code" href="classKviInputEditor.html#c0bf2f2b50f7994dc11074bdf3c0604f">00077</a>         Q_PROPERTY( <span class="keywordtype">int</span> TransparencyCapable READ heightHint )
<a name="l00078"></a>00078         Q_OBJECT
<a name="l00079"></a><a class="code" href="classKviInputEditor.html#7132e052c76046032dd8246fb5b30b3f">00079</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classKviTopicWidget.html">KviTopicWidget</a>; <span class="comment">// it uses home()</span>
<a name="l00080"></a>00080 <span class="keyword">public</span>:
<a name="l00088"></a>00088         <a class="code" href="classKviInputEditor.html" title="Input editor class.">KviInputEditor</a>(QWidget * pPar, <a class="code" href="classKviWindow.html" title="Base class for all windows in KVIrc.">KviWindow</a> * pWnd, <a class="code" href="classKviUserListView.html" title="User list view management class.">KviUserListView</a> * pView = 0);
<a name="l00089"></a>00089 
<a name="l00093"></a>00093         ~<a class="code" href="classKviInputEditor.html" title="Input editor class.">KviInputEditor</a>();
<a name="l00094"></a>00094 <span class="keyword">protected</span>:
<a name="l00095"></a><a class="code" href="classKviInputEditor.html#94639d297e3a85b6c3ee6edd9872e2db">00095</a>         <span class="keyword">static</span> <span class="keywordtype">int</span>                g_iInputFontCharWidth[256];
<a name="l00096"></a><a class="code" href="classKviInputEditor.html#7bec3ba3ec53d60433fe09ac3cc97692">00096</a>         <span class="keyword">static</span> QFontMetrics     * g_pLastFontMetrics;
<a name="l00097"></a><a class="code" href="classKviInputEditor.html#c46216468109702f86c6ea3744991408">00097</a>         <span class="keyword">static</span> <span class="keywordtype">int</span>                g_iInputInstances;
<a name="l00098"></a><a class="code" href="classKviInputEditor.html#4d8aa24c7ceff6ca7e40708f13eef8dc">00098</a>         QString                   m_szTextBuffer;
<a name="l00099"></a><a class="code" href="classKviInputEditor.html#7d1fc0158df16c084699bb8d374355d6">00099</a>         <span class="keywordtype">int</span>                       <a class="code" href="classKviTopicWidget.html#dc7ed082d4f2c5cb0421927f24d40cd1">m_iCursorPosition</a>;
<a name="l00100"></a><a class="code" href="classKviInputEditor.html#905785b0b69d811d1fbc959cd615f4c3">00100</a>         <span class="keywordtype">int</span>                       m_iFirstVisibleChar;
<a name="l00101"></a><a class="code" href="classKviInputEditor.html#8f0bf677a18ff9fa12e6ba7fdf3eaa74">00101</a>         <span class="keywordtype">int</span>                       m_iSelectionBegin;
<a name="l00102"></a><a class="code" href="classKviInputEditor.html#6c7cf9afdc2e0c332073be5fa9de7d85">00102</a>         <span class="keywordtype">int</span>                       m_iSelectionEnd;
<a name="l00103"></a><a class="code" href="classKviInputEditor.html#68d6273049751e94f0681f31a39f0e33">00103</a>         <span class="keywordtype">int</span>                       m_iMaxBufferSize;
<a name="l00104"></a><a class="code" href="classKviInputEditor.html#c25bf5a9865c35a158bc166d949d5458">00104</a>         <span class="keywordtype">bool</span>                      m_bSpSlowFlag; <span class="comment">// &lt;-- what is this ?</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106         <span class="comment">// members for supporting input methods</span>
<a name="l00107"></a><a class="code" href="classKviInputEditor.html#8a3956749501499497ea4db967680e8f">00107</a>         QString                   m_szIMText;
<a name="l00108"></a><a class="code" href="classKviInputEditor.html#10d540782eacec76b4ebb7c3129b2c2f">00108</a>         <span class="keywordtype">int</span>                       m_iIMStart;
<a name="l00109"></a><a class="code" href="classKviInputEditor.html#4bfcddb7974bf22798ef1b2ed473c576">00109</a>         <span class="keywordtype">int</span>                       m_iIMLength;
<a name="l00110"></a><a class="code" href="classKviInputEditor.html#e832b7cf839d0e863797f3df8012f0bc">00110</a>         <span class="keywordtype">int</span>                       m_iIMSelectionBegin;
<a name="l00111"></a><a class="code" href="classKviInputEditor.html#dad70fdc8c9b32c798045a5c12c9409c">00111</a>         <span class="keywordtype">int</span>                       m_iIMSelectionLength;
<a name="l00112"></a><a class="code" href="classKviInputEditor.html#e635fd98d4354dbea9977261626b4e3d">00112</a>         <span class="keywordtype">bool</span>                      m_bIMComposing;
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="classKviInputEditor.html#98f1cafeac7195d93ad85e9c9afcf662">00114</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>             m_iCurFore;
<a name="l00115"></a><a class="code" href="classKviInputEditor.html#9ffe2b7781d8a42885393ef98b4dba06">00115</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>             m_iCurBack;
<a name="l00116"></a><a class="code" href="classKviInputEditor.html#3481e684cbf411af094916400030ff53">00116</a>         <span class="keywordtype">bool</span>                      m_bCurBold;
<a name="l00117"></a><a class="code" href="classKviInputEditor.html#9f65b8471c688d7288a6a2097d1f141c">00117</a>         <span class="keywordtype">bool</span>                      m_bCurUnderline;
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classKviInputEditor.html#0eb5bed62aedf6628009229ba7242034">00119</a>         <span class="keywordtype">int</span>                       m_iBlockLen;
<a name="l00120"></a><a class="code" href="classKviInputEditor.html#019b624d2c761fc38afb40647be62d36">00120</a>         <span class="keywordtype">int</span>                       m_iBlockWidth;
<a name="l00121"></a><a class="code" href="classKviInputEditor.html#fae82947efa43fb2a445f1d23899c24e">00121</a>         <span class="keywordtype">bool</span>                      m_bControlBlock;
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classKviInputEditor.html#a55d33a0f81515e278bbf8af983aa0e8">00123</a>         <span class="keywordtype">bool</span>                      m_bCursorOn;
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="classKviInputEditor.html#886287f2a156ae616b7229eda53fb69a">00125</a>         <span class="keywordtype">int</span>                       m_iCursorTimer;
<a name="l00126"></a><a class="code" href="classKviInputEditor.html#b613be220433d2c8a9b15030b03fa6e5">00126</a>         <span class="keywordtype">int</span>                       m_iDragTimer;
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="classKviInputEditor.html#f47d66f7ae615e3e421f6288098b35c0">00128</a>         <span class="keywordtype">int</span>                       m_iLastCursorXPosition;
<a name="l00129"></a><a class="code" href="classKviInputEditor.html#ace1afe8291c571920b444a68f785be2">00129</a>         <span class="keywordtype">int</span>                       m_iSelectionAnchorChar;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="comment">// History stuff</span>
<a name="l00132"></a><a class="code" href="classKviInputEditor.html#f686505788628144858aae9e0fa81de8">00132</a>         <a class="code" href="classKviPointerList.html">KviPointerList&lt;QString&gt;</a> * <a class="code" href="classKviTopicWidget.html#00dc48495fafe406590fa441e91e3b24">m_pHistory</a>;
<a name="l00133"></a><a class="code" href="classKviInputEditor.html#6b5a83a50019253ff20a4532ca342edb">00133</a>         <span class="keywordtype">int</span>                       m_iCurHistoryIdx;
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="classKviInputEditor.html#c17e550be077e9425e334531491e0c72">00135</a>         <a class="code" href="classKviStr.html">KviStr</a>                    m_szSaveTextBuffer;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <span class="comment">// Nick completion</span>
<a name="l00138"></a><a class="code" href="classKviInputEditor.html#f2b259a73d33bda658d719f81a28314d">00138</a>         <a class="code" href="classKviUserListView.html" title="User list view management class.">KviUserListView</a>         * m_pUserListView;
<a name="l00139"></a><a class="code" href="classKviInputEditor.html#abe2f7599253f5175c9c11d4f37a578f">00139</a>         QString                   m_szLastCompletedNick;
<a name="l00140"></a><a class="code" href="classKviInputEditor.html#022052b4851c694dcb8a4f7cce397646">00140</a>         QString                   m_szLastCompletionBuffer;
<a name="l00141"></a><a class="code" href="classKviInputEditor.html#1551ac5cc68bc0e0112f3bf2382fdb1f">00141</a>         <span class="keywordtype">int</span>                       m_iLastCompletionCursorPosition;
<a name="l00142"></a><a class="code" href="classKviInputEditor.html#af35909f56c3c88a23ef09d03f00c865">00142</a>         <span class="keywordtype">int</span>                       m_iLastCompletionCursorXPosition;
<a name="l00143"></a><a class="code" href="classKviInputEditor.html#7cf13e5c68756fcdcc9d5a851f0e3fca">00143</a>         <span class="keywordtype">int</span>                       m_iLastCompletionFirstVisibleChar;
<a name="l00144"></a><a class="code" href="classKviInputEditor.html#6cf7758535ad907903c1b2451196698e">00144</a>         <span class="keywordtype">bool</span>                      m_bLastCompletionFinished;
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="classKviInputEditor.html#02c6635cc3c7ceb8d729744c1daab3ea">00146</a>         <span class="keywordtype">bool</span>                      m_bUpdatesEnabled;
<a name="l00147"></a><a class="code" href="classKviInputEditor.html#e1dffb29535d7910dd606363f71b873e">00147</a>         <a class="code" href="classKviStr.html">KviStr</a>                    m_szAltKeyCode;
<a name="l00148"></a><a class="code" href="classKviInputEditor.html#44f210aa0844cf82ba1959668ee49061">00148</a>         <a class="code" href="classKviWindow.html" title="Base class for all windows in KVIrc.">KviWindow</a>               * m_pKviWindow;
<a name="l00149"></a><a class="code" href="classKviInputEditor.html#ba71896040de01e859a2498a6457579f">00149</a>         QWidget                 * m_pInputParent;
<a name="l00150"></a><a class="code" href="classKviInputEditor.html#ebef244c5834860d6ed52043c804b99c">00150</a>         <a class="code" href="classKviTalPopupMenu.html">KviTalPopupMenu</a>         * m_pIconMenu;
<a name="l00151"></a><a class="code" href="classKviInputEditor.html#86b456c83b5a61594f1dd811b877be29">00151</a>         <span class="keywordtype">bool</span>                      m_bReadOnly;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153         <span class="comment">// undo/redo handling</span>
<a name="l00154"></a><a class="code" href="classKviInputEditor.html#91506747456891d4ffa80f8ece055092f19d9ced4bbbd833801c250ac9bc2b97">00154</a>         <span class="keyword">enum</span> <a class="code" href="classKviInputEditor.html#91506747456891d4ffa80f8ece055092">CommandType</a> { Separator, Insert, Remove, Delete, RemoveSelection, DeleteSelection, SetSelection };
<a name="l00155"></a><a class="code" href="structKviInputEditor_1_1Command.html">00155</a>         <span class="keyword">struct </span><a class="code" href="structKviInputEditor_1_1Command.html">Command</a> {
<a name="l00156"></a><a class="code" href="structKviInputEditor_1_1Command.html#a5830e39377c0ec07e240e0388d22ca3">00156</a>                 <span class="keyword">inline</span> <a class="code" href="structKviInputEditor_1_1Command.html#a5830e39377c0ec07e240e0388d22ca3">Command</a>() {}
<a name="l00157"></a><a class="code" href="structKviInputEditor_1_1Command.html#ccef468e03d16fbd0447c3f542c4bb93">00157</a>                 <span class="keyword">inline</span> <a class="code" href="structKviInputEditor_1_1Command.html#ccef468e03d16fbd0447c3f542c4bb93">Command</a>(<a class="code" href="classKviInputEditor.html#91506747456891d4ffa80f8ece055092">CommandType</a> t, <span class="keywordtype">int</span> p, QString <a class="code" href="kvi__numeric_8h.html#fcc1b6144d7f6a9e27acc4aebef7774c">c</a>, <span class="keywordtype">int</span> ss, <span class="keywordtype">int</span> se) : <a class="code" href="namespaceKviOsInfo.html#c118c3a07dc4cbbe510f06bafe548511">type</a>(t),us(c),pos(p),selStart(ss),selEnd(se) {}
<a name="l00158"></a><a class="code" href="structKviInputEditor_1_1Command.html#a58fa7720cab4ab97f92278af7e738d2">00158</a>                 uint <a class="code" href="namespaceKviOsInfo.html#c118c3a07dc4cbbe510f06bafe548511">type</a> : 4;
<a name="l00159"></a><a class="code" href="structKviInputEditor_1_1Command.html#8901a00ff6e2563852a7271a266e5f93">00159</a>                 QString us;
<a name="l00160"></a><a class="code" href="structKviInputEditor_1_1Command.html#080b24859cfed83064e46f171a6cd599">00160</a>                 <span class="keywordtype">int</span> pos, selStart, selEnd;
<a name="l00161"></a>00161         };
<a name="l00162"></a><a class="code" href="classKviInputEditor.html#21e035c9d590d5917b55080fa7aba9c0">00162</a>         QVector&lt;Command&gt;          history;
<a name="l00163"></a><a class="code" href="classKviInputEditor.html#34c4ad744a3a1db36efa8bf791c3173e">00163</a>         <span class="keywordtype">int</span>                       undoState;
<a name="l00164"></a><a class="code" href="classKviInputEditor.html#c264d611aa47d1d5c818a26b9d6048db">00164</a>         <span class="keywordtype">bool</span>                      separator;
<a name="l00165"></a>00165 <span class="keyword">public</span>:
<a name="l00170"></a>00170         <span class="keywordtype">int</span> heightHint() <span class="keyword">const</span>;
<a name="l00171"></a>00171 
<a name="l00176"></a>00176         <span class="keyword">virtual</span> QSize sizeHint() <span class="keyword">const</span>;
<a name="l00177"></a>00177 
<a name="l00183"></a>00183         <span class="keywordtype">void</span> setText(<span class="keyword">const</span> QString szText);
<a name="l00184"></a>00184 
<a name="l00189"></a><a class="code" href="classKviInputEditor.html#175dd9b135dcbe247ba09167ef01279b">00189</a>         QString <a class="code" href="classKviInputEditor.html#175dd9b135dcbe247ba09167ef01279b" title="Returns the text in the buffer.">text</a>() { <span class="keywordflow">return</span> m_szTextBuffer; };
<a name="l00190"></a>00190 
<a name="l00196"></a>00196         <span class="keywordtype">void</span> insertChar(QChar <a class="code" href="kvi__numeric_8h.html#fcc1b6144d7f6a9e27acc4aebef7774c">c</a>);
<a name="l00197"></a>00197 
<a name="l00203"></a>00203         <span class="keywordtype">void</span> insertText(<span class="keyword">const</span> QString &amp; szTxt);
<a name="l00204"></a>00204 
<a name="l00209"></a>00209         <span class="keywordtype">void</span> applyOptions();
<a name="l00210"></a>00210 
<a name="l00216"></a><a class="code" href="classKviInputEditor.html#74c396e1471947351e87edd8ab0e28df">00216</a>         <span class="keywordtype">void</span> <a class="code" href="classKviInputEditor.html#74c396e1471947351e87edd8ab0e28df" title="Sets the maximum buffer size.">setMaxBufferSize</a>(<span class="keywordtype">int</span> iSize) { m_iMaxBufferSize = iSize; };
<a name="l00217"></a>00217 
<a name="l00223"></a><a class="code" href="classKviInputEditor.html#88e8f8a4f350fee22570f246c081dc4f">00223</a>         <span class="keywordtype">void</span> <a class="code" href="classKviInputEditor.html#88e8f8a4f350fee22570f246c081dc4f" title="Sets the read only state for the input line.">setReadOnly</a>(<span class="keywordtype">bool</span> bReadOnly) { m_bReadOnly = bReadOnly; };
<a name="l00224"></a>00224 
<a name="l00229"></a><a class="code" href="classKviInputEditor.html#cb63ec2fb6a384f4603778f5ce5d2f59">00229</a>         <span class="keywordtype">bool</span> <a class="code" href="classKviInputEditor.html#cb63ec2fb6a384f4603778f5ce5d2f59" title="Returns true if the input line is in read only state.">isReadOnly</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bReadOnly; };
<a name="l00230"></a>00230 <span class="keyword">private</span>:
<a name="l00238"></a>00238         <span class="keywordtype">void</span> replaceWordBeforeCursor(<span class="keyword">const</span> QString &amp; szWord, <span class="keyword">const</span> QString &amp; szReplacement, <span class="keywordtype">bool</span> bRepaint = <span class="keyword">true</span>);
<a name="l00239"></a>00239 
<a name="l00249"></a>00249         <span class="keywordtype">int</span> replaceSegment(<span class="keywordtype">int</span> iStart, <span class="keywordtype">int</span> iLength, <span class="keyword">const</span> QString &amp; szString);
<a name="l00250"></a>00250 
<a name="l00257"></a>00257         <span class="keywordtype">void</span> getWordBeforeCursor(QString &amp; szBuffer, <span class="keywordtype">bool</span> * bIsFirstWordInLine);
<a name="l00258"></a>00258 
<a name="l00263"></a>00263         <span class="keywordtype">void</span> runUpToTheFirstVisibleChar();
<a name="l00264"></a>00264 
<a name="l00272"></a>00272         <span class="keywordtype">void</span> extractNextBlock(<span class="keywordtype">int</span> iIdx, QFontMetrics *fm, <span class="keywordtype">int</span> iCurXPos, <span class="keywordtype">int</span> iMaxXPos);
<a name="l00273"></a>00273 
<a name="l00285"></a>00285         <span class="keywordtype">void</span> drawTextBlock(QPainter * pa, <span class="keywordtype">int</span> iTop, <span class="keywordtype">int</span> iBottom, <span class="keywordtype">int</span> iCurXPos, <span class="keywordtype">int</span> iTextBaseline, <span class="keywordtype">int</span> iIdx, <span class="keywordtype">int</span> iLen, <span class="keywordtype">bool</span> bSelected = <span class="keyword">false</span>);
<a name="l00286"></a>00286 
<a name="l00292"></a>00292         <span class="keyword">static</span> QChar getSubstituteChar(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> uControlCode);
<a name="l00293"></a>00293 
<a name="l00298"></a>00298         <span class="keywordtype">void</span> moveRightFirstVisibleCharToShowCursor();
<a name="l00299"></a>00299 
<a name="l00304"></a>00304         <span class="keywordtype">void</span> repaintWithCursorOn();
<a name="l00305"></a>00305 
<a name="l00311"></a>00311         <span class="keywordtype">void</span> selectOneChar(<span class="keywordtype">int</span> iPos);
<a name="l00312"></a>00312 
<a name="l00318"></a>00318         <span class="keywordtype">int</span> charIndexFromXPosition(<span class="keywordtype">int</span> iXPos);
<a name="l00319"></a>00319 
<a name="l00325"></a>00325         <span class="keywordtype">int</span> xPositionFromCharIndex(<span class="keywordtype">int</span> iChIdx);
<a name="l00326"></a>00326 
<a name="l00331"></a>00331         <span class="keywordtype">void</span> killDragTimer();
<a name="l00332"></a>00332 
<a name="l00337"></a>00337         <span class="keywordtype">void</span> handleDragSelection();
<a name="l00338"></a>00338 
<a name="l00343"></a>00343         <span class="keywordtype">void</span> end();
<a name="l00344"></a>00344 
<a name="l00349"></a>00349         <span class="keywordtype">void</span> home();
<a name="l00350"></a>00350 
<a name="l00355"></a>00355         <span class="keywordtype">bool</span> hasSelection();
<a name="l00356"></a>00356 
<a name="l00363"></a>00363         <span class="keywordtype">void</span> moveCursorTo(<span class="keywordtype">int</span> iIdx, <span class="keywordtype">bool</span> bRepaint = <span class="keyword">true</span>);
<a name="l00364"></a>00364 
<a name="l00372"></a>00372         <span class="keywordtype">void</span> returnPressed(<span class="keywordtype">bool</span> bRepaint = <span class="keyword">true</span>);
<a name="l00373"></a>00373 
<a name="l00382"></a>00382         <span class="keywordtype">void</span> completion(<span class="keywordtype">bool</span> bShift);
<a name="l00383"></a>00383 
<a name="l00391"></a>00391         <span class="keywordtype">void</span> standardNickCompletion(<span class="keywordtype">bool</span> bAddMask, QString &amp; szWord, <span class="keywordtype">bool</span> bFirstWordInLine);
<a name="l00392"></a>00392 
<a name="l00398"></a>00398         <span class="keywordtype">void</span> internalCursorRight(<span class="keywordtype">bool</span> bShift);
<a name="l00399"></a>00399 
<a name="l00405"></a>00405         <span class="keywordtype">void</span> internalCursorLeft(<span class="keywordtype">bool</span> bShift);
<a name="l00406"></a>00406 
<a name="l00411"></a><a class="code" href="classKviInputEditor.html#d98c1afb3e8f3023367042268f29db0c">00411</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classKviInputEditor.html#d98c1afb3e8f3023367042268f29db0c" title="Returns true is there are some action in the undo stack.">isUndoAvailable</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !m_bReadOnly &amp;&amp; undoState; }
<a name="l00412"></a>00412 
<a name="l00417"></a><a class="code" href="classKviInputEditor.html#c5f0da26cc0a8eb8b39bb60b338a3ac2">00417</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classKviInputEditor.html#c5f0da26cc0a8eb8b39bb60b338a3ac2" title="Returns true is there are some action in the redo stack.">isRedoAvailable</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !m_bReadOnly &amp;&amp; undoState &lt; (int)history.size(); }
<a name="l00418"></a>00418 
<a name="l00423"></a><a class="code" href="classKviInputEditor.html#98819194c42d11e8ad84f38a4caad236">00423</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classKviInputEditor.html#98819194c42d11e8ad84f38a4caad236" title="Inserts an action separator in the undo stack.">separate</a>() { separator = <span class="keyword">true</span>; }
<a name="l00424"></a>00424 
<a name="l00430"></a>00430         <span class="keywordtype">void</span> addCommand(<span class="keyword">const</span> Command&amp; cmd);
<a name="l00431"></a>00431 
<a name="l00437"></a><a class="code" href="classKviInputEditor.html#8f2ad0de204c23b62b73443e450ba470">00437</a>         <span class="keyword">inline</span> <span class="keyword">static</span> QFontMetrics * getLastFontMetrics(<span class="keyword">const</span> QFont &amp; font)
<a name="l00438"></a>00438         {
<a name="l00439"></a>00439                 <span class="keywordflow">if</span>(g_pLastFontMetrics)
<a name="l00440"></a>00440                 {
<a name="l00441"></a>00441                         <span class="keywordflow">return</span> g_pLastFontMetrics;
<a name="l00442"></a>00442                 } <span class="keywordflow">else</span> {
<a name="l00443"></a>00443                         g_pLastFontMetrics = <span class="keyword">new</span> QFontMetrics(font);
<a name="l00444"></a>00444                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> u;
<a name="l00445"></a>00445                         <span class="keywordflow">for</span>(u=1; u&lt;32; u++)
<a name="l00446"></a>00446                         {
<a name="l00447"></a>00447                                 QChar <a class="code" href="kvi__numeric_8h.html#fcc1b6144d7f6a9e27acc4aebef7774c">c</a> = getSubstituteChar(u);
<a name="l00448"></a>00448                                 <a class="code" href="classKviInputEditor.html#94639d297e3a85b6c3ee6edd9872e2db">KviInputEditor::g_iInputFontCharWidth</a>[u] = g_pLastFontMetrics-&gt;width(c);
<a name="l00449"></a>00449                                 <span class="keywordflow">if</span>(c != QChar(u))
<a name="l00450"></a>00450                                         <a class="code" href="classKviInputEditor.html#94639d297e3a85b6c3ee6edd9872e2db">KviInputEditor::g_iInputFontCharWidth</a>[u] += 4;
<a name="l00451"></a>00451                         }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453                         <span class="keywordflow">for</span>(u=32; u&lt;256; u++)
<a name="l00454"></a>00454                         {
<a name="l00455"></a>00455                                 <a class="code" href="classKviInputEditor.html#94639d297e3a85b6c3ee6edd9872e2db">KviInputEditor::g_iInputFontCharWidth</a>[u] = g_pLastFontMetrics-&gt;width(QChar(u));
<a name="l00456"></a>00456                         }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458                         <span class="keywordflow">return</span> g_pLastFontMetrics;
<a name="l00459"></a>00459                 }
<a name="l00460"></a>00460         }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="keyword">public</span> slots:
<a name="l00468"></a>00468         <span class="keywordtype">void</span> iconPopupActivated(<span class="keywordtype">int</span> iId);
<a name="l00469"></a>00469 
<a name="l00477"></a>00477         <span class="keywordtype">void</span> copyToSelection(<span class="keywordtype">bool</span> bDonNotCopyToClipboard = <span class="keyword">true</span>);
<a name="l00478"></a>00478 
<a name="l00483"></a>00483         <span class="keywordtype">void</span> copyToClipboard();
<a name="l00484"></a>00484 
<a name="l00489"></a>00489         <span class="keywordtype">void</span> removeSelected();
<a name="l00490"></a>00490 
<a name="l00495"></a>00495         <span class="keywordtype">void</span> cut();
<a name="l00496"></a>00496 
<a name="l00502"></a>00502         <span class="keywordtype">void</span> undo(<span class="keywordtype">int</span> iUntil = -1);
<a name="l00503"></a>00503 
<a name="l00508"></a>00508         <span class="keywordtype">void</span> redo();
<a name="l00509"></a>00509 
<a name="l00514"></a>00514         <span class="keywordtype">void</span> pasteClipboardWithConfirmation();
<a name="l00515"></a>00515 
<a name="l00523"></a>00523         <span class="keywordtype">void</span> pasteSelectionWithConfirmation();
<a name="l00524"></a>00524 
<a name="l00529"></a>00529         <span class="keywordtype">void</span> pasteSlow();
<a name="l00530"></a>00530 
<a name="l00535"></a>00535         <span class="keywordtype">void</span> stopPasteSlow();
<a name="l00536"></a>00536 
<a name="l00541"></a>00541         <span class="keywordtype">void</span> pasteFile();
<a name="l00542"></a>00542 
<a name="l00547"></a>00547         <span class="keywordtype">void</span> selectAll();
<a name="l00548"></a>00548 
<a name="l00553"></a>00553         <span class="keywordtype">void</span> clear();
<a name="l00554"></a>00554 signals:
<a name="l00559"></a>00559         <span class="keywordtype">void</span> escapePressed();
<a name="l00560"></a>00560 
<a name="l00565"></a>00565         <span class="keywordtype">void</span> enterPressed();
<a name="l00566"></a>00566 <span class="keyword">protected</span>:
<a name="l00567"></a>00567         <span class="keyword">virtual</span> <span class="keywordtype">void</span> drawContents(QPainter *);
<a name="l00568"></a>00568         <span class="comment">//virtual void resizeEvent(QResizeEvent * e);</span>
<a name="l00569"></a>00569         <span class="keyword">virtual</span> <span class="keywordtype">void</span> timerEvent(QTimerEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00570"></a>00570         <span class="keyword">virtual</span> <span class="keywordtype">void</span> focusInEvent(QFocusEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00571"></a>00571         <span class="keyword">virtual</span> <span class="keywordtype">void</span> focusOutEvent(QFocusEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00572"></a>00572         <span class="keyword">virtual</span> <span class="keywordtype">void</span> keyPressEvent(QKeyEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00573"></a>00573         <span class="keyword">virtual</span> <span class="keywordtype">void</span> keyReleaseEvent(QKeyEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00574"></a>00574         <span class="keyword">virtual</span> <span class="keywordtype">void</span> mousePressEvent(QMouseEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00575"></a>00575         <span class="keyword">virtual</span> <span class="keywordtype">void</span> mouseReleaseEvent(QMouseEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00576"></a>00576         <span class="keyword">virtual</span> <span class="keywordtype">void</span> mouseDoubleClickEvent(QMouseEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00577"></a>00577         <span class="keyword">virtual</span> <span class="keywordtype">void</span> dragEnterEvent(QDragEnterEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00578"></a>00578         <span class="keyword">virtual</span> <span class="keywordtype">void</span> dropEvent(QDropEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00579"></a>00579         <span class="keyword">virtual</span> <span class="keywordtype">void</span> inputMethodEvent(QInputMethodEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>) ;
<a name="l00580"></a>00580         <span class="keyword">virtual</span> <span class="keywordtype">void</span> paintEvent(QPaintEvent * <a class="code" href="kvi__sp__numeric_8cpp.html#08a4415e9d594ff960030b921d42b91e">e</a>);
<a name="l00581"></a>00581 };
<a name="l00582"></a>00582 
<a name="l00583"></a>00583 <span class="preprocessor">#endif //_KVI_INPUT_EDITOR_H_</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Feb 9 17:32:22 2010 for KVIrc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
